nodes:
  DateToTimestamp:
    editor:
      col: 3
      row: 1
    in:
      data: 'cocoon://FilterN26/out/data'
      map: |
        x => ({
          ...x,
          date_ts: new Date(x.date).getTime()
        })
    type: Map
  Distance_e1rb4:
    editor:
      col: 4
      row: 1
    in:
      data: 'cocoon://ReadN26/out/transactions'
      metrics:
        amount:
          type: Linear
        time:
          attribute: createdTS
          targetAttribute: date_ts
          type: Linear
          weight: 0.0000003
      target: 'cocoon://DateToTimestamp/out/data'
    type: Distance
  FilterN26:
    '?': Filter transactions for the N26 account
    editor:
      col: 2
      row: 1
    in:
      data: 'cocoon://ReadYNAB/out/transactions'
      filter: x => x.account_name === 'N26'
    type: Filter
  ReadConfig:
    editor:
      col: 0
      row: 0
    in:
      uri: ~/.cocoon-ynab.yaml
    type: ReadYAML
  ReadN26:
    editor:
      col: 3
      row: 0
    in:
      config: 'cocoon://ReadConfig/out/data'
    persist: true
    type: ReadN26
  ReadYNAB:
    editor:
      col: 1
      row: 1
    in:
      budget: TeamTurtle
      config: 'cocoon://ReadConfig/out/data'
    persist: true
    type: ReadYNAB
